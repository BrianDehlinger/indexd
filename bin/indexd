#!/usr/bin/env python

import flask

import indexd
from indexd.index.sqlite import SQLiteIndexDriver
from indexd.alias.sqlite import SQLiteAliasDriver


if __name__ == '__main__':
    
    app = flask.Flask(__name__)

    app.config['JSONIFY_PRETTYPRINT_REGULAR'] = False

    app.config['INDEX'] = {
        'driver': SQLiteIndexDriver,
        'SQLITE3': {
            'host': 'index.sq3',
        }
    }

    app.config['ALIAS'] = {
        'driver': SQLiteAliasDriver,
        'SQLITE3': {
            'host': 'alias.sq3',
        }
    }

    app.register_blueprint(indexd.blueprint)

    app.run(
        host='0.0.0.0',
        port=8080,
        debug=True,
        threaded=True,
    )
